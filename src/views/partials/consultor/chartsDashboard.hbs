<script>
	(function () {

		const dzChartlist = function () {

			let chartBar = function () {

				    let valoresE = []   // => Valores historial empresas consultor
                    const datosY_empresas = []  // => Datos para la barras de la grafica
                    const datosX_empresas = [] // => Datos para el eje X (los meses)
                    valoresE = $('#datosJson_empresas_asignadas').val();

                    console.log("Valores historial empresas consultor >> ",valoresE)
                    if (valoresE) {
                        valoresE = JSON.parse(valoresE);
                        console.log(valoresE)
                        valoresE.forEach(e => {
                        datosY_empresas.push(e.num_empresas_asignadas)
                        datosX_empresas.push(e.mes)
                        })
                    }
				var optionsArea = {
					series: [{
						name: "Empresas",
						data: datosY_empresas
					}
					],
					chart: {
						height: 400,
						type: 'area',
						group: 'social',
						toolbar: {
							show: false
						},
						zoom: {
							enabled: false
						},
					},
					dataLabels: {
						enabled: false
					},
					stroke: {
						width: [4],
						colors: ['#FED061'],
						curve: 'smooth'
					},
					legend: {
						show: false,
						tooltipHoverFormatter: function (val, opts) {
							return val + ' - ' + opts.w.globals.series[opts.seriesIndex][opts.dataPointIndex] + ''
						},
						markers: {
							fillColors: ['#FED061'],
							width: 19,
							height: 19,
							strokeWidth: 0,
							radius: 19
						}
					},
					markers: {
						strokeWidth: [4],
						strokeColors: ['#FED061'],
						border: 0,
						colors: ['#fff'],
						hover: {
							size: 6,
						}
					},
			       xaxis: {
                         categories: datosX_empresas,
                          labels: {
                            style: {
                                colors: '#3E4954',
                                fontSize: '14px',
                                fontFamily: 'Poppins',
                                fontWeight: 100,
                            },
                        },
                    },
                    yaxis: {
                        labels: {
                            offsetX: -16,
                            style: {
                                colors: '#3E4954',
                                fontSize: '14px',
                                fontFamily: 'Poppins',
                                fontWeight: 100,

                            },
                            formatter: function (y) {
                                return y.toFixed(0) + "";
                            },
                        },
                    },
					fill: {
						colors: ['#FED061'],
						type: 'solid',
						opacity: 0.7
					},
					colors: ['#FED061'],
					grid: {
						borderColor: '#f1f1f1',
						xaxis: {
							lines: {
								show: true
							}
						}
					},
					responsive: [{
						breakpoint: 575,
						options: {
							chart: {
								height: 250,
							}
						}
					}]
				};
				var chartArea = new ApexCharts(document.querySelector("#chartBar"), optionsArea);
				chartArea.render();

			}
			
			let chartBar2 = function () {
				    let valoresI = []   // => Valores historial informes consultor
                    const datosY = []  // => Datos para la barras de la grafica
                    const datosX = [] // => Datos para el eje X (los meses)
                    valoresI = $('#datosJson_historialI_consultor').val();

                    console.log("Valores historial informes consultor >> ",valoresI)
                    if (valoresI) {
                        valoresI = JSON.parse(valoresI);
                        console.log(valoresI)
                        valoresI.forEach(i => {
                        datosY.push(i.num_informes)
                        datosX.push(i.mes)
                        })
                    }
				
				var optionsArea = {
					series: [{
						name: "Informes generados",
						data: datosY
					}
					],
					chart: {
						height: 400,
						type: 'area',
						group: 'social',
						toolbar: {
							show: false
						},
						zoom: {
							enabled: false
						},
					},
					dataLabels: {
						enabled: false
					},
					stroke: {
						width: [4],
						colors: ['#50368C'],
						curve: 'smooth'
					},
					legend: {
						show: false,
						tooltipHoverFormatter: function (val, opts) {
							return val + ' - ' + opts.w.globals.series[opts.seriesIndex][opts.dataPointIndex] + ''
						},
						markers: {
							fillColors: ['#50368C'],
							width: 19,
							height: 19,
							strokeWidth: 0,
							radius: 19
						}
					},
					markers: {
						strokeWidth: [4],
						strokeColors: ['#50368C'],
						border: 0,
						colors: ['#fff'],
						hover: {
							size: 12,
						}
					},
			          xaxis: {
                         categories: datosX,
                          labels: {
                            style: {
                                colors: '#3E4954',
                                fontSize: '14px',
                                fontFamily: 'Poppins',
                                fontWeight: 100,
                            },
                        },
                    },
                    yaxis: {
                        labels: {
                            offsetX: -16,
                            style: {
                                colors: '#3E4954',
                                fontSize: '14px',
                                fontFamily: 'Poppins',
                                fontWeight: 100,

                            },
                            formatter: function (y) {
                                return y.toFixed(0) + "";
                            },
                        },
                    },
					fill: {
						colors: ['#50368C'],
						type: 'solid',
						opacity: 0.7
					},
					colors: ['#50368C'],
					grid: {
						borderColor: '#f1f1f1',
						xaxis: {
							lines: {
								show: true
							}
						}
					},
					responsive: [{
						breakpoint: 575,
						options: {
							chart: {
								height: 250,
							}
						}
					}]
				};
				var chartArea = new ApexCharts(document.querySelector("#chartBar3"), optionsArea);
				chartArea.render();

			}
			
			/* Function ============ */
			return {
				load: function () {
					{{#if graficas1}}
					chartBar();
					chartBar2();
					{{/if}}
				},
			}

		}();

		jQuery(window).on('load', function () {
			setTimeout(function () {
				dzChartlist.load();
			}, 1000);
		});


		$(document).ready(function () {
		});

	}) ();
</script>